#!/usr/bin/env bash
set -euo pipefail

if ! git rev-parse --git-dir &>/dev/null; then
  echo "error: not in a git repository" >&2
  exit 1
fi

main_worktree=$(git worktree list --porcelain | head -1 | sed 's/^worktree //')

cd "$main_worktree"
exec "$SHELL"
